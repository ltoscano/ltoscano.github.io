<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Machine Learning & Cognitive</title>
  <meta name="description" content="Lorenzo Toscano's Artificial Intelligence Articles and Projects">

  <script src="https://use.fontawesome.com/42ac583ec1.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <!-- Google Fonts loaded here depending on setting in _data/options.yml true loads font, blank does not-->
  
    <link href='//fonts.googleapis.com/css?family=Lato:400,400italic' rel='stylesheet' type='text/css'>
  

  <!-- Load up MathJax script if needed ... specify in /_data/options.yml file-->
  
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

  <link rel="stylesheet" type="text/css" href="/css/tufte.css">
  <!-- <link rel="stylesheet" type="text/css" href="/css/print.css" media="print"> -->

  <link rel="canonical" href="https://synthetici.com/">

  <link rel="alternate" type="application/rss+xml" title="Machine Learning & Cognitive" href="https://synthetici.com/feed.xml" />

  <script src="/assets/jquery-1.12.4.min.js"></script>
  <script src="/assets/totop.min.js"></script>

  <style>
    .totop {
              position: fixed;
              bottom: 50px;
              right: 50px;
              cursor: pointer;
              display: none;
              background: #a05b7e;
              color: #fff;
              border-radius: 25px;
              height: 50px;
              line-height: 50px;
              padding: 0 30px;
              font-size: 18px;
      }
      
      /* Medium Feed Widget Styles */
      .medium-container {
          width: 100%;
          max-width: 1200px;
          margin: 0 auto;
          padding: 20px;
          background-color: transparent;
          box-sizing: border-box;
          border-radius: 8px;
          box-shadow: none;
      }
      
      .medium-branding {
          display: flex;
          justify-content: center;
          margin-bottom: 30px;
      }
      
      .medium-logo {
          width: 40px;
          height: 40px;
      }
      
      .feed-container {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 20px;
          margin-top: 20px;
      }
      
      .feed-item {
          border: 1px solid #eee;
          border-radius: 8px;
          overflow: hidden;
          display: flex;
          flex-direction: column;
          height: 100%;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          transition: transform 0.2s, box-shadow 0.2s;
      }
      
      .feed-item:hover {
          transform: translateY(-5px);
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }
      
      .post-image-container {
          width: 100%;
          height: 0;
          padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
          position: relative;
          overflow: hidden;
      }
      
      .post-image {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
      }
      
      .post-image img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          transition: transform 0.3s ease;
      }
      
      .feed-item:hover .post-image img {
          transform: scale(1.05);
      }
      
      .post-content {
          padding: 15px;
          display: flex;
          flex-direction: column;
          flex-grow: 1;
      }
      
      .title {
          font-size: 1.2rem;
          font-weight: 600;
          margin-bottom: 8px;
          color: #222;
      }
      
      .title a {
          text-decoration: none;
          color: #222;
          transition: color 0.2s;
      }
      
      .title a:hover {
          color: #03a87c; /* Medium green */
      }
      
      .subtitle {
          font-size: 0.95rem;
          font-weight: 400;
          margin-bottom: 10px;
          color: #555;
          font-style: italic;
      }
      
      .date {
          font-size: 0.8rem;
          color: #757575;
          margin-bottom: 8px;
          display: flex;
          align-items: center;
      }
      
      .date i {
          margin-right: 5px;
          color: #03a87c;
      }
      
      .excerpt {
          color: #444;
          margin-bottom: 15px;
          font-size: 0.9rem;
          /* Support for multi-line ellipsis */
          display: -webkit-box;
          -webkit-line-clamp: 3;
          line-clamp: 3;
          -webkit-box-orient: vertical;
          overflow: hidden;
          flex-grow: 1;
      }
      
      .categories {
          display: flex;
          flex-wrap: wrap;
          gap: 6px;
          margin-top: auto;
          padding-top: 12px;
          margin-bottom: 12px;
      }
      
      .category {
          display: inline-block;
          background-color: #f2f2f2;
          color: #555;
          font-size: 0.7rem;
          padding: 3px 10px;
          border-radius: 20px;
          border: 1px solid #e0e0e0;
      }
      
      .read-more {
          display: inline-block;
          color: #03a87c;
          font-weight: 500;
          text-decoration: none;
          transition: opacity 0.2s;
          padding: 5px 0;
          font-size: 0.9rem;
          align-self: flex-start;
      }
      
      .read-more:hover {
          opacity: 0.8;
      }
      
      .loading {
          text-align: center;
          padding: 40px;
          font-size: 1.2rem;
          color: #757575;
          grid-column: 1 / -1;
      }
      
      .error {
          color: #e53935;
          text-align: center;
          padding: 20px;
          grid-column: 1 / -1;
      }
      
      .pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          margin-top: 30px;
          margin-bottom: 20px;
          gap: 20px;
      }
      
      .page-btn {
          background-color: #03a87c;
          color: white;
          border: none;
          padding: 8px 16px;
          border-radius: 25px;
          cursor: pointer;
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          font-weight: 500;
          box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      }
      
      .page-btn:hover {
          background-color: #028e69;
          transform: translateY(-2px);
          box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      }
      
      .page-btn:active {
          transform: translateY(0);
      }
      
      .page-btn i {
          margin: 0 5px;
      }
      
      #page-info {
          font-size: 0.9rem;
          color: #666;
          font-weight: 500;
      }
      
      /* Responsive adjustments */
      @media (max-width: 768px) {
          .feed-container {
              grid-template-columns: 1fr;
          }
      }
      
      /* Substack Feed Widget Styles */
      .substack-container {
          width: 100%;
          max-width: 1200px;
          margin: 40px auto 0;
          padding: 20px;
          background-color: transparent;
          box-sizing: border-box;
          border-radius: 8px;
          box-shadow: none;
      }
      
      .substack-branding {
          display: flex;
          justify-content: center;
          margin-bottom: 30px;
      }
      
      .substack-logo {
          width: 40px;
          height: 40px;
      }
      
      .substack-feed-container {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 20px;
          margin-top: 20px;
      }
      
      .substack-feed-item {
          border: 1px solid #eee;
          border-radius: 8px;
          overflow: hidden;
          display: flex;
          flex-direction: column;
          height: 100%;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          transition: transform 0.2s, box-shadow 0.2s;
      }
      
      .substack-feed-item:hover {
          transform: translateY(-5px);
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }
      
      .substack-post-image-container {
          width: 100%;
          height: 0;
          padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
          position: relative;
          overflow: hidden;
      }
      
      .substack-post-image {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
      }
      
      .substack-post-image img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          transition: transform 0.3s ease;
      }
      
      .substack-feed-item:hover .substack-post-image img {
          transform: scale(1.05);
      }
      
      .substack-post-content {
          padding: 15px;
          display: flex;
          flex-direction: column;
          flex-grow: 1;
      }
      
      .substack-title {
          font-size: 1.2rem;
          font-weight: 600;
          margin-bottom: 8px;
          color: #222;
      }
      
      .substack-title a {
          text-decoration: none;
          color: #222;
          transition: color 0.2s;
      }
      
      .substack-title a:hover {
          color: #FF6719; /* Substack orange */
      }
      
      .substack-subtitle {
          font-size: 0.95rem;
          font-weight: 400;
          margin-bottom: 10px;
          color: #555;
          font-style: italic;
      }
      
      .substack-date {
          font-size: 0.8rem;
          color: #757575;
          margin-bottom: 8px;
          display: flex;
          align-items: center;
      }
      
      .substack-date i {
          margin-right: 5px;
          color: #FF6719;
      }
      
      .substack-excerpt {
          color: #444;
          margin-bottom: 15px;
          font-size: 0.9rem;
          display: -webkit-box;
          -webkit-line-clamp: 3;
          line-clamp: 3;
          -webkit-box-orient: vertical;
          overflow: hidden;
          flex-grow: 1;
      }
      
      .substack-read-more {
          display: inline-block;
          color: #FF6719;
          font-weight: 500;
          text-decoration: none;
          transition: opacity 0.2s;
          padding: 5px 0;
          font-size: 0.9rem;
          align-self: flex-start;
      }
      
      .substack-read-more:hover {
          opacity: 0.8;
      }
      
      .substack-loading {
          text-align: center;
          padding: 40px;
          font-size: 1.2rem;
          color: #757575;
          grid-column: 1 / -1;
      }
      
      .substack-error {
          color: #e53935;
          text-align: center;
          padding: 20px;
          grid-column: 1 / -1;
      }
      
      .substack-pagination {
          display: flex;
          justify-content: center;
          align-items: center;
          margin-top: 30px;
          margin-bottom: 20px;
          gap: 20px;
      }
      
      .substack-page-btn {
          background-color: #FF6719;
          color: white;
          border: none;
          padding: 8px 16px;
          border-radius: 25px;
          cursor: pointer;
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          font-weight: 500;
          box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      }
      
      .substack-page-btn:hover {
          background-color: #E55A00;
          transform: translateY(-2px);
          box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      }
      
      .substack-page-btn:active {
          transform: translateY(0);
      }
      
      .substack-page-btn i {
          margin: 0 5px;
      }
      
      #substack-page-info {
          font-size: 0.9rem;
          color: #666;
          font-weight: 500;
      }
      
      /* Responsive adjustments for Substack */
      @media (max-width: 768px) {
          .substack-feed-container {
              grid-template-columns: 1fr;
          }
      }
  </style>

</head>

  <body class="full-width">
    <a name="TopOfPage"></a>
<!--- Header and nav template site-wide -->
<header>
    <nav class="group">
	<a href="/"><img class="badge" src="/assets/img/badge_1.png" alt="CH"></a>
  <span class="blogtitle">Machine Learning & Cognitive - synthetici.com</span><br/>
  
    <a class="active" href="/">Posts</a>
  
    <a href="/historical/">Historical</a>
  
    <a href="/resources/">Resources</a>
  
    <a href="/about/">About</a>
  
    <a href="/privacy/">Privacy & Cookie (ita)</a>
  
	</nav>
</header>

    <article>
        <h1 class="content-listing-header sans">Latest Posts</h1>
  <p>
  Welcome to my web pages! The tabs at the top lead to my latest articles via RSS feeds from Medium and Substack, an <em>historical</em> archive of older articles, <em>resources</em> about machine learning and cognitive computing, or info <em>about</em> me.
</p>

  <div class="medium-container">
        <div class="medium-branding">
            <svg width="40" height="40" viewBox="0 0 1043.63 592.71" class="medium-logo">
                <g data-name="Layer 2">
                    <g data-name="Layer 1">
                        <path d="M588.67 296.36c0 163.67-131.78 296.35-294.33 296.35S0 460 0 296.36 131.78 0 294.34 0s294.33 132.69 294.33 296.36M911.56 296.36c0 154.06-65.89 279-147.17 279s-147.17-124.94-147.17-279 65.88-279 147.16-279 147.17 124.9 147.17 279M1043.63 296.36c0 138-23.17 249.94-51.76 249.94s-51.75-111.91-51.75-249.94 23.17-249.94 51.75-249.94 51.76 111.9 51.76 249.94" fill="#2cbe8e"></path>
                    </g>
                </g>
            </svg>
        </div>

        <div id="feed-container" class="feed-container">
            <div class="loading">Loading posts...</div>
        </div>
        
        <div class="pagination">
            <button id="prev-page" class="page-btn"><i class="fas fa-chevron-left"></i> Prev</button>
            <span id="page-info">Page 1</span>
            <button id="next-page" class="page-btn">Next <i class="fas fa-chevron-right"></i></button>
        </div>
    </div>

    <!-- Substack Feed Widget -->
    <div class="substack-container">
        <div class="substack-branding">
            <svg width="40" height="40" viewBox="0 0 40 40" class="substack-logo">
                <path d="M 8 10 L 32 10 L 32 14 L 8 14 Z M 8 18 L 32 18 L 32 22 L 8 22 Z M 8 26 L 32 26 L 20 34 Z" fill="#FF6719"/>
            </svg>
        </div>

        <div id="substack-feed-container" class="substack-feed-container">
            <div class="substack-loading">Loading Substack posts...</div>
        </div>
        
        <div class="substack-pagination">
            <button id="substack-prev-page" class="substack-page-btn"><i class="fas fa-chevron-left"></i> Prev</button>
            <span id="substack-page-info">Page 1</span>
            <button id="substack-next-page" class="substack-page-btn">Next <i class="fas fa-chevron-right"></i></button>
        </div>
    </div>

    </article>
    <span class="print-footer">Latest Posts - lorenzo toscano</span>
    <footer>
  <hr class="slender">
  <ul class="footer-links">
    <li><a href="mailto:lorenzo.toscano@gmail.com"><span class="icon-mail"></span></a></li>
    
      <li>
        <a href="//www.twitter.com/BEmatic"><span class="icon-twitter"></span></a>
      </li>
    
      <li>
        <a href="//www.linkedin.com/in/lorenzotoscano"><span class="icon-linkedin"></span></a>
      </li>
    
      <li>
        <a href="//github.com/ltoscano"><span class="icon-github"></span></a>
      </li>
    
      <li>
        <a href="//www.scoop.it/t/knowmatic"><span class="icon-bullhorn"></span></a>
      </li>
    
      <li>
        <a href="/feed"><span class="icon-feed"></span></a>
      </li>
    
  </ul>
<div class="credits">
<span>&copy; 2025 &nbsp;&nbsp;LORENZO TOSCANO</span></br> <br>
<a href="/disclaimer">Blog Disclaimer</a>
</div>
</footer>
<div class="totop"><i class="fa fa-angle-up"></i> To Top</div>
<script>
      $('.totop').tottTop({
          scrollTop: 100
      });
</script>

<script>
    // Configurazione
    const LENGTH_EXCERPT = 500; // Lunghezza dell'estratto da mostrare
    const POSTS_PER_PAGE = 4; // Numero di post per pagina
    let currentPage = 1;
    let allPosts = []; // Array per conservare tutti i post
    
    // Funzione per formattare la data Medium
    function formatDate(dateString) {
        const date = new Date(dateString);
        const now = new Date();
        const diffTime = Math.abs(now - date);
        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        
        if (diffDays === 0) {
            return 'Today';
        } else if (diffDays === 1) {
            return 'Yesterday';
        } else if (diffDays < 7) {
            return `${diffDays} days ago`;
        } else if (diffDays < 30) {
            const weeks = Math.floor(diffDays / 7);
            return `${weeks} ${weeks === 1 ? 'week' : 'weeks'} ago`;
        } else if (diffDays < 365) {
            const months = Math.floor(diffDays / 30);
            return `${months} ${months === 1 ? 'month' : 'months'} ago`;
        } else {
            const years = Math.floor(diffDays / 365);
            return `${years} ${years === 1 ? 'year' : 'years'} ago`;
        }
    }
    
    // Funzione per formattare la data Substack
    function formatSubstackDate(dateString) {
        const date = new Date(dateString);
        const now = new Date();
        const diffTime = Math.abs(now - date);
        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        
        if (diffDays === 0) {
            return 'Today';
        } else if (diffDays === 1) {
            return 'Yesterday';
        } else if (diffDays < 7) {
            return `${diffDays} days ago`;
        } else if (diffDays < 30) {
            const weeks = Math.floor(diffDays / 7);
            return `${weeks} ${weeks === 1 ? 'week' : 'weeks'} ago`;
        } else if (diffDays < 365) {
            const months = Math.floor(diffDays / 30);
            return `${months} ${months === 1 ? 'month' : 'months'} ago`;
        } else {
            const years = Math.floor(diffDays / 365);
            return `${years} ${years === 1 ? 'year' : 'years'} ago`;
        }
    }
    
    // Funzione globale per caricare i post Medium dal file JSON locale
    window.fetchPosts = function(attempt = 1, maxAttempts = 3) {
        const feedContainer = document.getElementById('feed-container');
        
        feedContainer.innerHTML = `<div class="loading">Loading Medium posts... ${attempt}/${maxAttempts}</div>`;
        
        // Carica i dati dal file JSON locale generato da GitHub Actions
        fetch('/data/feeds/medium.json?' + new Date().getTime()) // Cache busting
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Failed to load Medium data: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                if (!data.posts || data.posts.length === 0) {
                    throw new Error('No posts found in Medium data');
                }
                
                // Processa i post dal JSON
                allPosts = data.posts.map(post => {
                    return {
                        title: post.title,
                        link: post.link,
                        pubDate: post.pubDate,
                        formattedDate: formatDate(post.pubDate),
                        categories: [], // Le categorie non sono nel JSON semplificato
                        elements: {
                            subtitle: '',
                            image: post.image || '',
                            excerpt: post.excerpt || 'No excerpt available'
                        }
                    };
                });
                
                // Aggiorna il display della pagina
                updatePageDisplay();
                
                // Mostra i post della pagina corrente
                displayPosts();
            })
            .catch(error => {
                console.error(`Medium attempt ${attempt} failed:`, error);
                
                if (attempt < maxAttempts) {
                    // Riprova dopo 2 secondi
                    setTimeout(() => {
                        window.fetchPosts(attempt + 1, maxAttempts);
                    }, 2000);
                } else {
                    // Fallback al metodo CORS proxy se il file JSON non è disponibile
                    console.log('Falling back to CORS proxy method...');
                    fetchPostsWithProxy(1, 10);
                }
            });
    };
    
    // Funzione fallback con CORS proxy (mantenuta per compatibilità)
    window.fetchPostsWithProxy = function(attempt = 1, maxAttempts = 10) {
        const corsProxies = [
            'https://api.allorigins.win/raw?url=',
            'https://cors-anywhere.herokuapp.com/',
            'https://corsproxy.io/?'
        ];
        const mediumFeedUrl = 'https://medium.com/feed/@thegoodprogrammer';
        
        feedContainer.innerHTML = `<div class="loading">Loading posts via proxy... ${attempt}/${maxAttempts}</div>`;
        
        // Usa un proxy diverso per ogni tentativo (ciclico)
        const proxyIndex = (attempt - 1) % corsProxies.length;
        const proxyUrl = `${corsProxies[proxyIndex]}${encodeURIComponent(mediumFeedUrl)}`;
        
        // Recupera e analizza il feed RSS
        fetch(proxyUrl)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Network response was not ok: ${response.status}`);
                }
                return response.text();
            })
            .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
            .then(data => {
                const items = data.querySelectorAll('item');
                
                if (items.length === 0) {
                    throw new Error('No posts found in feed');
                }
                
                // Salva tutti i post
                allPosts = Array.from(items).map(item => {
                    return processItem(item);
                });
                
                // Aggiorna il display della pagina
                updatePageDisplay();
                
                // Mostra i post della pagina corrente
                displayPosts();
            })
            .catch(error => {
                console.error(`Proxy attempt ${attempt} failed:`, error);
                
                if (attempt < maxAttempts) {
                    // Riprova dopo 2 secondi
                    setTimeout(() => {
                        window.fetchPostsWithProxy(attempt + 1, maxAttempts);
                    }, 2000);
                } else {
                    // Tutti i tentativi falliti
                    feedContainer.innerHTML = `
                        <div class="error">
                            <p>Error loading posts from Medium after ${maxAttempts} attempts.</p>
                            <p>This may be due to CORS restrictions or network issues.</p>
                            <p><button onclick="fetchPosts(1, 3)" style="background: #03a87c; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin: 10px 0;">Try Again</button></p>
                            <p>Or try opening the feed directly: <a href="${mediumFeedUrl}" target="_blank">${mediumFeedUrl}</a></p>
                        </div>
                    `;
                }
            });
    };
    
    document.addEventListener('DOMContentLoaded', function() {
        const feedContainer = document.getElementById('feed-container');
        const prevButton = document.getElementById('prev-page');
        const nextButton = document.getElementById('next-page');
        const pageInfo = document.getElementById('page-info');
        const username = 'thegoodprogrammer';
        
        // Funzione per estrarre elementi dal contenuto (per compatibilità con CORS proxy)
        function extractContentElements(content) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = content;
            
            const result = {
                subtitle: '',
                image: '',
                excerpt: ''
            };
            
            const h4 = tempDiv.querySelector('h4');
            if (h4) {
                result.subtitle = h4.textContent.trim();
            }
            
            const figure = tempDiv.querySelector('figure');
            if (figure) {
                const img = figure.querySelector('img');
                if (img && img.src) {
                    result.image = img.src;
                }
            }
            
            const firstP = tempDiv.querySelector('p');
            if (firstP) {
                let excerpt = firstP.textContent.trim();
                if (excerpt.length > LENGTH_EXCERPT) {
                    excerpt = excerpt.substring(0, LENGTH_EXCERPT) + '...';
                }
                result.excerpt = excerpt;
            }

            return result;
        }
        
        // Funzione per estrarre categorie dal contenuto (per compatibilità con CORS proxy)
        function extractCategories(item) {
            const categories = [];
            const categoryElements = item.querySelectorAll('category');
            
            categoryElements.forEach(category => {
                const categoryText = category.textContent.trim();
                if (categoryText && !categories.includes(categoryText)) {
                    categories.push(categoryText);
                }
            });
            
            return categories;
        }
        
        // Funzione per processare un singolo item (per compatibilità con CORS proxy)
        function processItem(item) {
            const title = item.querySelector('title')?.textContent || 'No title';
            const link = item.querySelector('link')?.textContent || '#';
            const pubDate = item.querySelector('pubDate')?.textContent || '';
            const formattedDate = pubDate ? formatDate(pubDate) : 'Unknown date';
            
            const categories = extractCategories(item);
            
            let content = '';
            const contentEncoded = item.querySelector('content\\:encoded, encoded')?.textContent;
            const description = item.querySelector('description')?.textContent;
            
            if (contentEncoded) {
                content = contentEncoded;
            } else if (description) {
                content = description;
            }
            
            const elements = extractContentElements(content);
            
            return {
                title,
                link,
                pubDate,
                formattedDate,
                categories,
                elements
            };
        }
        
        // Gestione dei pulsanti di paginazione
        prevButton.addEventListener('click', function() {
            if (currentPage > 1) {
                currentPage--;
                updatePageDisplay();
                displayPosts();
            }
        });
        
        nextButton.addEventListener('click', function() {
            if (currentPage * POSTS_PER_PAGE < allPosts.length) {
                currentPage++;
                updatePageDisplay();
                displayPosts();
            }
        });
        
        // Funzione per aggiornare il display della pagina
        function updatePageDisplay() {
            pageInfo.textContent = `Page ${currentPage}`;
            
            // Abilita/disabilita i pulsanti in base alla pagina corrente
            prevButton.disabled = currentPage === 1;
            nextButton.disabled = currentPage * POSTS_PER_PAGE >= allPosts.length;
            
            // Applica stile visivo per i pulsanti disabilitati
            if (prevButton.disabled) {
                prevButton.style.opacity = "0.5";
                prevButton.style.cursor = "not-allowed";
            } else {
                prevButton.style.opacity = "1";
                prevButton.style.cursor = "pointer";
            }
            
            if (nextButton.disabled) {
                nextButton.style.opacity = "0.5";
                nextButton.style.cursor = "not-allowed";
            } else {
                nextButton.style.opacity = "1";
                nextButton.style.cursor = "pointer";
            }
        }
        
        // Usa CORS proxy (prova diversi in caso uno fallisca)
        const corsProxies = [
            'https://api.allorigins.win/raw?url=',
            'https://cors-anywhere.herokuapp.com/',
            'https://corsproxy.io/?'
        ];
        
        const mediumFeedUrl = `https://medium.com/feed/@${username}`;
        
        // Funzione per estrarre elementi dal contenuto
        function extractContentElements(content) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = content;
            
            // Estrai elementi
            const result = {
                subtitle: '',
                image: '',
                excerpt: ''
            };
            
            // Trova il primo h4 come sottotitolo
            const h4 = tempDiv.querySelector('h4');
            if (h4) {
                result.subtitle = h4.textContent.trim();
            }
            
            // Trova la prima figura con immagine
            const figure = tempDiv.querySelector('figure');
            if (figure) {
                const img = figure.querySelector('img');
                if (img && img.src) {
                    result.image = img.src;
                }
            }
            
            // Trova il primo paragrafo per l'estratto
            const firstP = tempDiv.querySelector('p');
            if (firstP) {
                let excerpt = firstP.textContent.trim();
                if (excerpt.length > LENGTH_EXCERPT) {
                    excerpt = excerpt.substring(0, LENGTH_EXCERPT) + '...';
                }
                result.excerpt = excerpt;
            }

            return result;
        }
        
        // Funzione per estrarre categorie dal contenuto
        function extractCategories(item) {
            const categories = [];
            const categoryElements = item.querySelectorAll('category');
            
            categoryElements.forEach(category => {
                const categoryText = category.textContent.trim();
                if (categoryText && !categories.includes(categoryText)) {
                    categories.push(categoryText);
                }
            });
            
            return categories;
        }
        
        // Funzione per processare un singolo item
        function processItem(item) {
            const title = item.querySelector('title')?.textContent || 'No title';
            const link = item.querySelector('link')?.textContent || '#';
            const pubDate = item.querySelector('pubDate')?.textContent || '';
            const formattedDate = pubDate ? formatDate(pubDate) : 'Unknown date';
            
            // Ottieni categorie
            const categories = extractCategories(item);
            
            // Ottieni contenuto
            let content = '';
            const contentEncoded = item.querySelector('content\\:encoded, encoded')?.textContent;
            const description = item.querySelector('description')?.textContent;
            
            if (contentEncoded) {
                content = contentEncoded;
            } else if (description) {
                content = description;
            }
            
            // Estrai elementi dal contenuto
            const elements = extractContentElements(content);
            
            return {
                title,
                link,
                pubDate,
                formattedDate,
                categories,
                elements
            };
        }
        
        // Funzione per mostrare i post della pagina corrente
        function displayPosts() {
            // Calcola l'indice di inizio e fine per la pagina corrente
            const startIndex = (currentPage - 1) * POSTS_PER_PAGE;
            const endIndex = Math.min(startIndex + POSTS_PER_PAGE, allPosts.length);
            
            // Ottieni i post per la pagina corrente
            const postsToShow = allPosts.slice(startIndex, endIndex);
            
            // Genera l'HTML per i post
            let feedHTML = '';
            
            postsToShow.forEach(post => {
                // Crea HTML del sottotitolo se disponibile
                const subtitleHTML = post.elements.subtitle 
                    ? `<div class="subtitle">${post.elements.subtitle}</div>` 
                    : '';
                
                feedHTML += `
                    <div class="feed-item">
                        ${post.elements.image ? `
                        <div class="post-image-container">
                            <div class="post-image">
                                <img src="${post.elements.image}" alt="${post.title}" />
                            </div>
                        </div>` : ''}
                        <div class="post-content">
                            <div class="title"><a href="${post.link}" target="_blank">${post.title}</a></div>
                            ${subtitleHTML}
                            <div class="date"><i class="far fa-calendar-alt"></i> ${post.formattedDate}</div>
                            <div class="excerpt">${post.elements.excerpt || 'No excerpt available'}</div>
                            <div class="categories">
                                ${post.categories.map(cat => `<span class="category">${cat}</span>`).join('')}
                            </div>
                            <a href="${post.link}" class="read-more" target="_blank">Read the full post</a>
                        </div>
                    </div>
                `;
            });
            
            // Aggiorna il contenitore
            feedContainer.innerHTML = feedHTML;
        }
        
        // Inizializza la paginazione
        updatePageDisplay();
        
        // Avvia il caricamento dei post all'inizio con retry automatico
        window.fetchPosts(1, 10);
    });
</script>

<script>
    // Configurazione Substack
    const SUBSTACK_LENGTH_EXCERPT = 500;
    const SUBSTACK_POSTS_PER_PAGE = 4;
    let substackCurrentPage = 1;
    let substackAllPosts = [];
    
    // Funzione globale per caricare i post Substack dal file JSON locale
    window.fetchSubstackPosts = function(attempt = 1, maxAttempts = 3) {
        const substackFeedContainer = document.getElementById('substack-feed-container');
        
        substackFeedContainer.innerHTML = `<div class="substack-loading">Loading Substack posts... ${attempt}/${maxAttempts}</div>`;
        
        // Carica i dati dal file JSON locale generato da GitHub Actions
        fetch('/data/feeds/substack.json?' + new Date().getTime()) // Cache busting
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Failed to load Substack data: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                if (!data.posts || data.posts.length === 0) {
                    throw new Error('No posts found in Substack data');
                }
                
                // Processa i post dal JSON
                substackAllPosts = data.posts.map(post => {
                    return {
                        title: post.title,
                        link: post.link,
                        pubDate: post.pubDate,
                        formattedDate: formatSubstackDate(post.pubDate),
                        imageUrl: post.image || '',
                        excerpt: post.excerpt || 'No excerpt available',
                        subtitle: post.description ? 
                            (post.description.length > 100 ? post.description.substring(0, 100) + '...' : post.description) 
                            : ''
                    };
                });
                
                updateSubstackPageDisplay();
                displaySubstackPosts();
            })
            .catch(error => {
                console.error(`Substack attempt ${attempt} failed:`, error);
                
                if (attempt < maxAttempts) {
                    // Riprova dopo 2 secondi
                    setTimeout(() => {
                        window.fetchSubstackPosts(attempt + 1, maxAttempts);
                    }, 2000);
                } else {
                    // Fallback al metodo CORS proxy se il file JSON non è disponibile
                    console.log('Falling back to CORS proxy method for Substack...');
                    fetchSubstackPostsWithProxy(1, 10);
                }
            });
    };
    
    // Funzione fallback con CORS proxy per Substack (mantenuta per compatibilità)
    window.fetchSubstackPostsWithProxy = function(attempt = 1, maxAttempts = 10) {
        const substackCorsProxies = [
            'https://api.allorigins.win/raw?url=',
            'https://cors-anywhere.herokuapp.com/',
            'https://corsproxy.io/?'
        ];
        const substackFeedUrl = 'https://bematic.substack.com/feed';
        
        substackFeedContainer.innerHTML = `<div class="substack-loading">Loading Substack posts via proxy... ${attempt}/${maxAttempts}</div>`;
        
        // Usa un proxy diverso per ogni tentativo (ciclico)
        const proxyIndex = (attempt - 1) % substackCorsProxies.length;
        const proxyUrl = `${substackCorsProxies[proxyIndex]}${encodeURIComponent(substackFeedUrl)}`;
        
        fetch(proxyUrl)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Network response was not ok: ${response.status}`);
                }
                return response.text();
            })
            .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
            .then(data => {
                const items = data.querySelectorAll('item');
                
                if (items.length === 0) {
                    throw new Error('No Substack posts found in feed');
                }
                
                // Salva tutti i post Substack
                substackAllPosts = Array.from(items).map(item => {
                    return processSubstackItem(item);
                });
                
                updateSubstackPageDisplay();
                displaySubstackPosts();
            })
            .catch(error => {
                console.error(`Substack proxy attempt ${attempt} failed:`, error);
                
                if (attempt < maxAttempts) {
                    // Riprova dopo 2 secondi
                    setTimeout(() => {
                        window.fetchSubstackPostsWithProxy(attempt + 1, maxAttempts);
                    }, 2000);
                } else {
                    // Tutti i tentativi falliti
                    substackFeedContainer.innerHTML = `
                        <div class="substack-error">
                            <p>Error loading posts from Substack after ${maxAttempts} attempts.</p>
                            <p>This may be due to CORS restrictions or network issues.</p>
                            <p><button onclick="fetchSubstackPosts(1, 3)" style="background: #FF6719; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin: 10px 0;">Try Again</button></p>
                            <p>Or try opening the feed directly: <a href="${substackFeedUrl}" target="_blank">${substackFeedUrl}</a></p>
                        </div>
                    `;
                }
            });
    };
    
    document.addEventListener('DOMContentLoaded', function() {
        const substackFeedContainer = document.getElementById('substack-feed-container');
        const substackPrevButton = document.getElementById('substack-prev-page');
        const substackNextButton = document.getElementById('substack-next-page');
        const substackPageInfo = document.getElementById('substack-page-info');
        
        // Funzione per processare un singolo item Substack (per compatibilità con CORS proxy)
        function processSubstackItem(item) {
            const title = item.querySelector('title')?.textContent || 'No title';
            const link = item.querySelector('link')?.textContent || '#';
            const pubDate = item.querySelector('pubDate')?.textContent || '';
            const formattedDate = pubDate ? formatSubstackDate(pubDate) : 'Unknown date';
            const description = item.querySelector('description')?.textContent || '';
            
            // Estrai l'immagine dall'elemento enclosure
            let imageUrl = '';
            const enclosure = item.querySelector('enclosure');
            if (enclosure && enclosure.getAttribute('url')) {
                imageUrl = enclosure.getAttribute('url');
            }
            
            // Ottieni contenuto da content:encoded
            let excerpt = '';
            let contentEncoded = null;
            
            try {
                contentEncoded = 
                    item.querySelector('content\\:encoded')?.textContent ||
                    item.querySelector('encoded')?.textContent ||
                    item.getElementsByTagName('content:encoded')[0]?.textContent;
            } catch (e) {
                console.error("Error getting content:encoded:", e);
            }
            
            if (!contentEncoded) {
                const itemXml = new XMLSerializer().serializeToString(item);
                const regex = /<content:encoded>([\s\S]*?)<\/content:encoded>/;
                const encodedMatch = itemXml.match(regex);
                if (encodedMatch && encodedMatch[1]) {
                    contentEncoded = encodedMatch[1];
                }
            }
            
            // Estrai l'excerpt dal contenuto
            if (contentEncoded) {
                const wrapper = document.createElement('div');
                wrapper.innerHTML = contentEncoded;

                let fullText = '';
                for (let node of wrapper.childNodes) {
                    if (node.nodeType === Node.ELEMENT_NODE && node.tagName.toLowerCase() === 'p') {
                        fullText = node.textContent.trim();
                        break;
                    }
                }

                if (fullText) {
                    excerpt = fullText.length > SUBSTACK_LENGTH_EXCERPT
                        ? fullText.substring(0, SUBSTACK_LENGTH_EXCERPT) + '...'
                        : fullText;
                }
            }
            
            // Se non è stato trovato alcun estratto, usa la descrizione come fallback
            if (!excerpt && description) {
                excerpt = description.trim();
                if (excerpt.length > SUBSTACK_LENGTH_EXCERPT) {
                    excerpt = excerpt.substring(0, SUBSTACK_LENGTH_EXCERPT) + '...';
                }
            }
            
            // Estrai il sottotitolo dalla descrizione
            let subtitle = description;
            if (subtitle && subtitle.length > 100) {
                subtitle = subtitle.substring(0, 100) + '...';
            }
            
            return {
                title,
                link,
                pubDate,
                formattedDate,
                imageUrl,
                excerpt,
                subtitle
            };
        }
        
        // Gestione dei pulsanti di paginazione Substack
        substackPrevButton.addEventListener('click', function() {
            if (substackCurrentPage > 1) {
                substackCurrentPage--;
                updateSubstackPageDisplay();
                displaySubstackPosts();
            }
        });
        
        substackNextButton.addEventListener('click', function() {
            if (substackCurrentPage * SUBSTACK_POSTS_PER_PAGE < substackAllPosts.length) {
                substackCurrentPage++;
                updateSubstackPageDisplay();
                displaySubstackPosts();
            }
        });
        
        // Funzione per aggiornare il display della pagina Substack
        function updateSubstackPageDisplay() {
            substackPageInfo.textContent = `Page ${substackCurrentPage}`;
            
            substackPrevButton.disabled = substackCurrentPage === 1;
            substackNextButton.disabled = substackCurrentPage * SUBSTACK_POSTS_PER_PAGE >= substackAllPosts.length;
            
            if (substackPrevButton.disabled) {
                substackPrevButton.style.opacity = "0.5";
                substackPrevButton.style.cursor = "not-allowed";
            } else {
                substackPrevButton.style.opacity = "1";
                substackPrevButton.style.cursor = "pointer";
            }
            
            if (substackNextButton.disabled) {
                substackNextButton.style.opacity = "0.5";
                substackNextButton.style.cursor = "not-allowed";
            } else {
                substackNextButton.style.opacity = "1";
                substackNextButton.style.cursor = "pointer";
            }
        }
        
        // CORS proxy per Substack
        const substackCorsProxies = [
            'https://api.allorigins.win/raw?url=',
            'https://cors-anywhere.herokuapp.com/',
            'https://corsproxy.io/?'
        ];
        
        const substackFeedUrl = 'https://bematic.substack.com/feed';
        
        // Funzione per processare un singolo item Substack (per compatibilità con CORS proxy)
        function processSubstackItem(item) {
            const title = item.querySelector('title')?.textContent || 'No title';
            const link = item.querySelector('link')?.textContent || '#';
            const pubDate = item.querySelector('pubDate')?.textContent || '';
            const formattedDate = pubDate ? formatSubstackDate(pubDate) : 'Unknown date';
            const description = item.querySelector('description')?.textContent || '';
            
            // Estrai l'immagine dall'elemento enclosure
            let imageUrl = '';
            const enclosure = item.querySelector('enclosure');
            if (enclosure && enclosure.getAttribute('url')) {
                imageUrl = enclosure.getAttribute('url');
            }
            
            // Ottieni contenuto da content:encoded
            let excerpt = '';
            let contentEncoded = null;
            
            try {
                contentEncoded = 
                    item.querySelector('content\\:encoded')?.textContent ||
                    item.querySelector('encoded')?.textContent ||
                    item.getElementsByTagName('content:encoded')[0]?.textContent;
            } catch (e) {
                console.error("Error getting content:encoded:", e);
            }
            
            if (!contentEncoded) {
                const itemXml = new XMLSerializer().serializeToString(item);
                const regex = /<content:encoded>([\s\S]*?)<\/content:encoded>/;
                const encodedMatch = itemXml.match(regex);
                if (encodedMatch && encodedMatch[1]) {
                    contentEncoded = encodedMatch[1];
                }
            }
            
            // Estrai l'excerpt dal contenuto
            if (contentEncoded) {
                const wrapper = document.createElement('div');
                wrapper.innerHTML = contentEncoded;

                let fullText = '';
                for (let node of wrapper.childNodes) {
                    if (node.nodeType === Node.ELEMENT_NODE && node.tagName.toLowerCase() === 'p') {
                        fullText = node.textContent.trim();
                        break;
                    }
                }

                if (fullText) {
                    excerpt = fullText.length > SUBSTACK_LENGTH_EXCERPT
                        ? fullText.substring(0, SUBSTACK_LENGTH_EXCERPT) + '...'
                        : fullText;
                }
            }
            
            // Se non è stato trovato alcun estratto, usa la descrizione come fallback
            if (!excerpt && description) {
                excerpt = description.trim();
                if (excerpt.length > SUBSTACK_LENGTH_EXCERPT) {
                    excerpt = excerpt.substring(0, SUBSTACK_LENGTH_EXCERPT) + '...';
                }
            }
            
            // Estrai il sottotitolo dalla descrizione
            let subtitle = description;
            if (subtitle && subtitle.length > 100) {
                subtitle = subtitle.substring(0, 100) + '...';
            }
            
            return {
                title,
                link,
                pubDate,
                formattedDate,
                imageUrl,
                excerpt,
                subtitle
            };
        }
        
        // Funzione per mostrare i post Substack della pagina corrente
        function displaySubstackPosts() {
            const startIndex = (substackCurrentPage - 1) * SUBSTACK_POSTS_PER_PAGE;
            const endIndex = Math.min(startIndex + SUBSTACK_POSTS_PER_PAGE, substackAllPosts.length);
            
            const postsToShow = substackAllPosts.slice(startIndex, endIndex);
            
            let feedHTML = '';
            
            postsToShow.forEach(post => {
                let subtitleHTML = '';
                if (post.subtitle) {
                    subtitleHTML = `<div class="substack-subtitle">${post.subtitle}</div>`;
                }
                
                feedHTML += `
                    <div class="substack-feed-item">
                        ${post.imageUrl ? `
                        <div class="substack-post-image-container">
                            <div class="substack-post-image">
                                <img src="${post.imageUrl}" alt="${post.title}" />
                            </div>
                        </div>` : ''}
                        <div class="substack-post-content">
                            <div class="substack-title"><a href="${post.link}" target="_blank">${post.title}</a></div>
                            ${subtitleHTML}
                            <div class="substack-date"><i class="far fa-calendar-alt"></i> ${post.formattedDate}</div>
                            <div class="substack-excerpt">${post.excerpt || 'No excerpt available'}</div>
                            <a href="${post.link}" class="substack-read-more" target="_blank">Read the full post</a>
                        </div>
                    </div>
                `;
            });
            
            substackFeedContainer.innerHTML = feedHTML;
        }
        
        // Inizializza la paginazione Substack
        updateSubstackPageDisplay();
        
        // Avvia il caricamento dei post Substack con retry automatico
        window.fetchSubstackPosts(1, 10);
    });
</script>

<!--Start Cookie Script--> <script type="text/javascript" charset="UTF-8" src="//cookie-script.com/s/f67066386a32612237b658624241e0af.js"></script> <!--End Cookie Script-->

  </body>
</html>
